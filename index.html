<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
    <title>dbcs</title>
    <link rel="stylesheet" href="/src/style.css">
</head>

<body class="flex flex-col h-full mb-22 md:mb-4">
<header x-data
        class="py-4 px-2 sticky top-0 bg-base-100 z-50 border-b-2 border-b-base-200">
    <div class="grid grid-cols-2 md:grid-cols-3 grid-rows-2 lg:grid-cols-6 lg:grid-rows-1 gap-2">
        <div class="col-span-2 md:col-span-3 lg:col-span-4 flex flex-row lg:justify-normal gap-2 items-center">
            <div>
                <h1 class="text-xl"
                    x-text="$store.character.name || 'Character'"></h1>
                <div x-show="$store.character.profession || $store.character.kin">
                    <span x-text="$store.character.profession"></span> | <span
                        x-text="$store.character.kin"></span>
                </div>
            </div>
            <button class="btn btn-sm"
                    onclick="document.querySelector('#characterBasics').showModal()">
                Edit
            </button>
        </div>
        <div class="flex flex-col items-center lg:items-end">
            <div class="flex items-center gap-1">
                <div class="text-sm">Willpower Points</div>
                <button class="btn btn-xs"
                        @click="$store.character.willpowerPoints = $store.character.maxWillpowerPoints">
                    Reset
                </button>
            </div>
            <div class="flex items-center gap-1">
                <label class="sr-only" for="willpowerPoints">Current Willpower
                    Points</label>
                <input type="number" id="willpowerPoints" class="input w-20"
                       step="1"
                       x-model="$store.character.willpowerPoints"/>
                <div>/</div>
                <label class="sr-only" for="maxWillpowerPoints">Maximum
                    Willpower
                    Points</label>
                <input type="number" id="maxWillpowerPoints" step="1"
                       class="input input-ghost w-20"
                       x-model="$store.character.maxWillpowerPoints"/>
            </div>
        </div>
        <div class="md:col-start-3 lg:col-start-auto flex flex-col items-center lg:items-end">
            <div class="flex items-center gap-1">
                <div class="text-sm">Hit Points</div>
                <button class="btn btn-xs"
                        @click="$store.character.hitPoints = $store.character.maxHitPoints">
                    Reset
                </button>
            </div>
            <div class="flex items-center gap-1">
                <label class="sr-only" for="hitPoints">Current Hit
                    Points</label>
                <input type="number" id="hitPoints" class="input w-20" step="1"
                       x-model="$store.character.hitPoints"/>
                <div>/</div>
                <label class="sr-only" for="maxHitPoints">Maximum Hit
                    Points</label>
                <input type="number" id="maxHitPoints" step="1"
                       class="input input-ghost w-20"
                       x-model="$store.character.maxHitPoints"/>
            </div>
        </div>
    </div>
    <dialog id="characterBasics" class="modal">
        <div class="modal-box">
            <form method="dialog">
                <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">
                    <span class="sr-only">Close</span><span
                        aria-hidden="true">âœ•</span>
                </button>
            </form>
            <h1 class="text-lg font-bold">Edit Basics</h1>
            <div>
                <label for="characterName" class="label">Name</label>
                <input x-model="$store.character.name" name="characterName"
                       id="characterName" type="text"
                       class="input w-full"/>
            </div>
            <div>
                <label class="label" for="profession">Profession</label>
                <input type="text" list="professions" class="input w-full"
                       id="profession" name="profession"
                       x-model="$store.character.profession"
                />
                <datalist id="professions">
                    <option value="Artisan">
                    <option value="Bard">
                    <option value="Fighter">
                    <option value="Hunter">
                    <option value="Knight">
                    <option value="Mage">
                    <option value="Mariner">
                    <option value="Merchant">
                    <option value="Scholar">
                    <option value="Thief">
                </datalist>
            </div>
            <div>
                <label class="label" for="kin">Kin</label>
                <input type="text" list="kins" class="input w-full" id="kin"
                       name="kin" x-model="$store.character.kin"
                />
                <datalist id="kins">
                    <option value="Dwarf">
                    <option value="Elf">
                    <option value="Human">
                    <option value="Halfling">
                    <option value="Mallard">
                    <option value="Wolfkin">
                </datalist>
            </div>
        </div>
    </dialog>
</header>

<nav x-data class="dock md:hidden">
    <button @click="$store.activeTab = 'skills'"
            :class="$store.activeTab === 'skills' && 'dock-active'"><span
            class="dock-label">Skills</span>
    </button>
    <button @click="$store.activeTab = 'combat'"
            :class="$store.activeTab === 'combat' && 'dock-active'"><span
            class="dock-label">Combat</span>
    </button>
    <button @click="$store.activeTab = 'inventory'"
            :class="$store.activeTab === 'inventory' && 'dock-active'"><span
            class="dock-label">Inventory</span>
    </button>
    <button @click="$store.activeTab = 'basic'"
            :class="$store.activeTab === 'basic' && 'dock-active'"><span
            class="dock-label">Basic</span>
    </button>
</nav>
<main x-data class="p-2">
    <div class="mb-4 grid grid-cols-3 lg:grid-cols-6 gap-2 border-base-200 border-2 rounded-lg p-2">
        <div class="flex flex-col items-center gap-2">
            <div class="flex flex-col items-center gap-1">
                <label class="label" for="strength">Strength</label>
                <input type="number" id="strength" class="input w-20" step="1"
                       x-model="$store.character.attributes.str"/>
            </div>
            <label class="label text-sm">
                <input type="checkbox" x-model="$store.character.exhausted"
                       class="checkbox checkbox-sm checked:checkbox-warning"/>
                Exhausted
            </label>
        </div>
        <div class="flex flex-col items-center gap-2">
            <div class="flex flex-col items-center gap-1">
                <label class="label" for="constitution">Constitution</label>
                <input type="number" id="constitution" class="input w-20"
                       step="1"
                       x-model="$store.character.attributes.con"/>
            </div>
            <label class="label text-sm">
                <input type="checkbox"
                       class="checkbox checkbox-sm checked:checkbox-warning"
                       x-model="$store.character.sickly"/> Sickly
            </label>
        </div>
        <div class="flex flex-col items-center gap-2">
            <div class="flex flex-col items-center gap-1">
                <label class="label" for="agility">Agility</label>
                <input type="number" id="agility" class="input w-20" step="1"
                       x-model="$store.character.attributes.agl"/>
            </div>
            <label class="label text-sm">
                <input type="checkbox"
                       class="checkbox checkbox-sm checked:checkbox-warning"
                       x-model="$store.character.dazed"/> Dazed
            </label>
        </div>
        <div class="flex flex-col items-center gap-2">
            <div class="flex flex-col items-center gap-1">
                <label class="label" for="intelligence">Intelligence</label>
                <input type="number" id="intelligence" class="input w-20"
                       step="1"
                       x-model="$store.character.attributes.int"/>
            </div>
            <label class="label text-sm">
                <input type="checkbox"
                       class="checkbox checkbox-sm checked:checkbox-warning"
                       x-model="$store.character.angry"/> Angry
            </label>
        </div>
        <div class="flex flex-col items-center gap-2">
            <div class="flex flex-col items-center gap-1">
                <label class="label" for="willpower">Willpower</label>
                <input type="number" id="willpower" class="input w-20" step="1"
                       x-model="$store.character.attributes.wil"/>
            </div>
            <label class="label text-sm">
                <input type="checkbox"
                       class="checkbox checkbox-sm checked:checkbox-warning"
                       x-model="$store.character.scared"/> Scared
            </label>
        </div>
        <div class="flex flex-col items-center gap-2">
            <div class="flex flex-col items-center gap-1">
                <label class="label" for="charisma">Charisma</label>
                <input type="number" id="charisma" class="input w-20" step="1"
                       x-model="$store.character.attributes.cha"/>
            </div>
            <label class="label text-sm">
                <input type="checkbox"
                       class="checkbox checkbox-sm checked:checkbox-warning"
                       x-model="$store.character.disheartened"/> Disheartened
            </label>
        </div>
    </div>
    <nav x-data role="tablist"
         class="hidden md:flex md:tabs tabs-border w-full justify-center mb-2">
        <button role="tab" class="tab" @click="$store.activeTab = 'skills'"
                :class="$store.activeTab === 'skills' && 'tab-active'">Skills
        </button>
        <button role="tab" class="tab" @click="$store.activeTab = 'combat'"
                :class="$store.activeTab === 'combat' && 'tab-active'">Combat
        </button>
        <button role="tab" class="tab" @click="$store.activeTab = 'inventory'"
                :class="$store.activeTab === 'inventory' && 'tab-active'">
            Inventory
        </button>
        <button role="tab" class="tab" @click="$store.activeTab = 'basic'"
                :class="$store.activeTab === 'basic' && 'tab-active'">Basic
        </button>
    </nav>
    <div x-show="$store.activeTab === 'skills'">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-4">
            <template x-for="skillName in Object.keys($store.character.skills)"
                      :key="skillName">
                <div class="flex items-center justify-between p-2 bg-base-200/30 rounded-lg">
                    <div class="flex items-center gap-2">
                        <input :id="`mark-${skillName}`" type="checkbox"
                               x-model="$store.character.skills[skillName].marked"
                               class="checkbox checkbox-sm "/>
                        <label :for="`mark-${skillName}`" class="sr-only"
                               x-text="`Mark ${$store.character.skills[skillName].label}`"></label>
                        <label :for="`value-${skillName}`"
                               x-text="$store.character.skills[skillName].label"></label>
                    </div>
                    <input type="number"
                           :id="`value-${skillName}`"
                           x-model="$store.character.skills[skillName].value"
                           class="input input-sm w-16 text-right" step="1"/>
                </div>
            </template>
        </div>
        <div class="flex items-center justify-center gap-2 mt-4">
            <h3 class="text-lg ">Secondary Skills</h3>
            <button class="btn btn-sm"
                    onclick="document.querySelector('#addSecondarySkill').showModal()">
                Add
            </button>
            <dialog x-data="{label: ''}" id="addSecondarySkill" class="modal">
                <div class="modal-box">

                    <h1 class="text-lg font-bold">Add Secondary Skill</h1>
                    <form method="dialog"
                          @submit="$store.character.secondarySkills.push({label: label, value: 0, marked: false}); label = '';">

                        <div>
                            <label for="secondarySkillLabel"
                                   class="label">Name</label>
                            <input x-model="label"
                                   name="secondarySkillLabel"
                                   id="secondarySkillLabel" type="text"
                                   required
                                   class="input validator w-full"/>
                        </div>
                        <div class="modal-action">
                            <button class="btn" type="reset"
                                    @click="document.querySelector('#addSecondarySkill').close()"
                            >
                                Cancel
                            </button>
                            <button class="btn"
                                    :disabled="label.trim() === ''"
                                    type="submit">
                                Add Skill
                            </button>
                        </div>
                    </form>

                </div>
            </dialog>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-4">
            <template x-for="(skill, index) in $store.character.secondarySkills"
                      :key="index">
                <div class="flex items-center justify-between p-2 bg-base-200/30 rounded-lg">
                    <div class="flex items-center gap-2">
                        <input :id="`mark-skill-${index}`" type="checkbox"
                               x-model="skill.marked"
                               class="checkbox checkbox-sm "/>
                        <label :for="`mark-skill-${index}`" class="sr-only"
                               x-text="`Mark ${skill.label}`"></label>
                        <label :for="`value-skill-${index}`"
                               x-text="skill.label"></label>
                    </div>
                    <input type="number"
                           :id="`value-skill-${index}`"
                           x-model="skill.value"
                           class="input input-sm w-16 text-right" step="1"/>
                </div>
            </template>
        </div>

    </div>
    <div x-show="$store.activeTab === 'combat'">
        Combat
    </div>
    <div x-show="$store.activeTab === 'inventory'">
        Inventory
    </div>
    <div x-show="$store.activeTab === 'basic'">
        <fieldset
                class="fieldset bg-base-200 border-base-300 rounded-box w-full border p-4">
            <legend class="fieldset-legend">Basic Information</legend>

            <div>
                <label class="label" for="weakness">Weakness</label>
                <textarea id="weakness" class="textarea "
                          x-model="$store.character.weakness"></textarea>
            </div>

        </fieldset>
    </div>
</main>

<script type="module" src="/src/main.ts"></script>
</body>

</html>